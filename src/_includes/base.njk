<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>{{ title if title else site.title }}{% if title %} | {{ site.title }}{% endif %}</title>
  <meta name="description" content="{{ description or site.description }}">
  <meta name="author" content="{{ site.author }}">

  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/layout.css">
  <link rel="stylesheet" href="/css/content.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet">

  <!-- Favicon -->
  <link rel="icon" href="/favicon-512x512.png" sizes="512x512" type="image/png">
  <link rel="apple-touch-icon" href="/favicon-512x512.png">

  <!-- Open Graph -->
  <meta property="og:title" content="{{ title }}">
  <meta property="og:description" content="{{ description or site.description }}">
  <meta property="og:url" content="{{ site.url }}{{ page.url }}">
  <meta property="og:image" content="{{ site.url }}/og_banner_image.png">
  <meta property="og:type" content="website">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ title }}">
  <meta name="twitter:description" content="{{ description or site.description }}">
  <meta name="twitter:image" content="{{ site.url }}/og_banner_image.png">

  <!-- Canonical URL -->
  <link rel="canonical" href="{{ site.url }}{{ page.url }}">
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Organization",
          "name": "{{ site.title }}",
          "url": "{{ site.url }}",
          "logo": "{{ site.logoUrl }}",
          "description": "{{ site.description }}",
          "sameAs": [
            "{{ site.substackUrl }}",
          ],
          "publishingPrinciples": "{{ site.url }}/about/",
          "founder": {
            "@type": "Person",
            "name": "{{ site.author }}",
            "url": "{{ site.personalUrl }}",
            "jobTitle": "Founder and Writer",
            "sameAs": [
              "{{ site.substackUrl }}",
              "{{ site.linkedInUrl }}",
              "{{ site.personalGithubUrl }}",
              "{{ site.fromScratchGithubUrl }}",
              "{{ site.codeUrl }}",
              "{{ site.personalUrl }}"
            ]
          }
        },
        {
          "@type": "WebSite",
          "name": "{{ site.title }}",
          "url": "{{ site.url }}",
          "publisher": {
            "@type": "Organization",
            "name": "{{ site.title }}"
          }
        },
        {
          "@type": "Article",
          "headline": "{{ title }}",
          "description": "{{ description or site.description }}",
          "author": {
            "@type": "Person",
            "name": "{{ site.author }}",
            "url": "{{ site.personalUrl }}"
          },
          "publisher": {
            "@type": "Organization",
            "name": "{{ site.title }}",
            "logo": {
              "@type": "ImageObject",
              "url": "{{ site.logoUrl }}"
            }
          },
          "datePublished": "{{ page.date | essayDateFormat }}",
          "dateModified": "{{ page.date | essayDateFormat }}",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "{{ site.url }}{{ page.url }}"
          }
        }
      ]
    }
  </script>

  <script src="https://unpkg.com/@hotwired/turbo"></script>
  <script defer data-domain="{{ site.domain }}" src="https://plausible.io/js/script.outbound-links.js"></script>
</head>

<body>
  <div class="mobile-nav">
    <div class="mobile-nav-inner">
      <span class="site-title"><a href="/">{{ site.title }}</a></span>
      <div class="hamburger" onclick="toggleNav()">â˜°</div>
    </div>
  </div>
  <nav id="main-nav">
    <ul>
      <li><a href="/">{{ site.title }}</a></li>
      <li><a href="/about/">about</a></li>
      <li><a href="/essays/">essays</a></li>
      <li><a href="/books/">books</a></li>
      <li><a href="/subscribe/">subscribe</a></li>
    </ul>
  </nav>

  <div class="container">
    <main>
      <div class="main-inner">
        {{ content | safe }}
      </div>
    </main>
  </div>
  <script>
    function toggleNav() {
      const nav = document.getElementById('main-nav');
      nav.classList.toggle('nav-open');
    }
  </script>
</body>

</html>
